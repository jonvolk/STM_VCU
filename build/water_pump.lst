ARM GAS  /tmp/cc1gS1jf.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"water_pump.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.wpInit,"ax",%progbits
  16              		.align	1
  17              		.global	wpInit
  18              		.syntax unified
  19              		.thumb
  20              		.thumb_func
  21              		.fpu softvfp
  23              	wpInit:
  24              	.LFB67:
  25              		.file 1 "Core/Src/water_pump.c"
   1:Core/Src/water_pump.c **** #include "water_pump.h"
   2:Core/Src/water_pump.c **** 
   3:Core/Src/water_pump.c **** void wpHandler(void)
   4:Core/Src/water_pump.c **** {
   5:Core/Src/water_pump.c ****     switch (vcu.state)
   6:Core/Src/water_pump.c ****     {
   7:Core/Src/water_pump.c ****     case run:
   8:Core/Src/water_pump.c ****         if (ldu.dir == FWD || ldu.dir == REV)
   9:Core/Src/water_pump.c ****         {
  10:Core/Src/water_pump.c ****             int throttleDuty = MAP(ldu.pot, 870, 4095, 50, 100);
  11:Core/Src/water_pump.c ****             int tempDuty = MAP(ldu.hsTemp, 0, 85, 50, 100);
  12:Core/Src/water_pump.c **** 
  13:Core/Src/water_pump.c ****             if (tempDuty > throttleDuty)
  14:Core/Src/water_pump.c ****             {
  15:Core/Src/water_pump.c ****                 wpDuty(tempDuty);
  16:Core/Src/water_pump.c ****             }
  17:Core/Src/water_pump.c ****             else
  18:Core/Src/water_pump.c ****             {
  19:Core/Src/water_pump.c ****                 wpDuty(throttleDuty);
  20:Core/Src/water_pump.c ****             }
  21:Core/Src/water_pump.c ****         }
  22:Core/Src/water_pump.c ****         else
  23:Core/Src/water_pump.c ****         {
  24:Core/Src/water_pump.c ****             wpDuty(0);
  25:Core/Src/water_pump.c ****         }
  26:Core/Src/water_pump.c **** 
  27:Core/Src/water_pump.c ****         break;
  28:Core/Src/water_pump.c **** 
  29:Core/Src/water_pump.c ****     case charge_keyOff:
  30:Core/Src/water_pump.c ****     case charge_keyOn:
  31:Core/Src/water_pump.c ****         wpDuty(50);
  32:Core/Src/water_pump.c ****         break;
  33:Core/Src/water_pump.c **** 
ARM GAS  /tmp/cc1gS1jf.s 			page 2


  34:Core/Src/water_pump.c ****     case off:
  35:Core/Src/water_pump.c ****         wpDuty(0);
  36:Core/Src/water_pump.c ****     default:
  37:Core/Src/water_pump.c ****         break;
  38:Core/Src/water_pump.c ****     }
  39:Core/Src/water_pump.c **** }
  40:Core/Src/water_pump.c **** 
  41:Core/Src/water_pump.c **** void wpInit(void)
  42:Core/Src/water_pump.c **** {
  26              		.loc 1 42 0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 0
  29              		@ frame_needed = 0, uses_anonymous_args = 0
  30              		@ link register save eliminated.
  31              	.LVL0:
  32              	.LBB2:
  43:Core/Src/water_pump.c ****     for (size_t i = 0; i < 100; i++)
  33              		.loc 1 43 0
  34 0000 0023     		movs	r3, #0
  35 0002 04E0     		b	.L2
  36              	.LVL1:
  37              	.L3:
  44:Core/Src/water_pump.c ****     {
  45:Core/Src/water_pump.c ****         waterPWM[i] = 0;
  38              		.loc 1 45 0 discriminator 3
  39 0004 0021     		movs	r1, #0
  40 0006 034A     		ldr	r2, .L4
  41 0008 42F82310 		str	r1, [r2, r3, lsl #2]
  43:Core/Src/water_pump.c ****     for (size_t i = 0; i < 100; i++)
  42              		.loc 1 43 0 discriminator 3
  43 000c 0133     		adds	r3, r3, #1
  44              	.LVL2:
  45              	.L2:
  43:Core/Src/water_pump.c ****     for (size_t i = 0; i < 100; i++)
  46              		.loc 1 43 0 is_stmt 0 discriminator 1
  47 000e 632B     		cmp	r3, #99
  48 0010 F8D9     		bls	.L3
  49              	.LBE2:
  46:Core/Src/water_pump.c ****     }
  47:Core/Src/water_pump.c **** }
  50              		.loc 1 47 0 is_stmt 1
  51 0012 7047     		bx	lr
  52              	.L5:
  53              		.align	2
  54              	.L4:
  55 0014 00000000 		.word	waterPWM
  56              		.cfi_endproc
  57              	.LFE67:
  59              		.section	.text.wpDuty,"ax",%progbits
  60              		.align	1
  61              		.global	wpDuty
  62              		.syntax unified
  63              		.thumb
  64              		.thumb_func
  65              		.fpu softvfp
  67              	wpDuty:
  68              	.LFB68:
ARM GAS  /tmp/cc1gS1jf.s 			page 3


  48:Core/Src/water_pump.c **** 
  49:Core/Src/water_pump.c **** void wpDuty(volatile int duty)
  50:Core/Src/water_pump.c **** {
  69              		.loc 1 50 0
  70              		.cfi_startproc
  71              		@ args = 0, pretend = 0, frame = 8
  72              		@ frame_needed = 0, uses_anonymous_args = 0
  73              		@ link register save eliminated.
  74              	.LVL3:
  75 0000 82B0     		sub	sp, sp, #8
  76              	.LCFI0:
  77              		.cfi_def_cfa_offset 8
  78 0002 0190     		str	r0, [sp, #4]
  79              	.LVL4:
  80              	.LBB3:
  51:Core/Src/water_pump.c ****     for (size_t i = 0; i < duty; i++)
  81              		.loc 1 51 0
  82 0004 0023     		movs	r3, #0
  83 0006 04E0     		b	.L7
  84              	.LVL5:
  85              	.L8:
  52:Core/Src/water_pump.c ****     {
  53:Core/Src/water_pump.c ****         waterPWM[i] = (uint32_t)WP_Pin;
  86              		.loc 1 53 0 discriminator 3
  87 0008 4021     		movs	r1, #64
  88 000a 094A     		ldr	r2, .L12
  89 000c 42F82310 		str	r1, [r2, r3, lsl #2]
  51:Core/Src/water_pump.c ****     for (size_t i = 0; i < duty; i++)
  90              		.loc 1 51 0 discriminator 3
  91 0010 0133     		adds	r3, r3, #1
  92              	.LVL6:
  93              	.L7:
  51:Core/Src/water_pump.c ****     for (size_t i = 0; i < duty; i++)
  94              		.loc 1 51 0 is_stmt 0 discriminator 1
  95 0012 019A     		ldr	r2, [sp, #4]
  96 0014 9342     		cmp	r3, r2
  97 0016 F7D3     		bcc	.L8
  98              	.LBE3:
  99              	.LBB4:
  54:Core/Src/water_pump.c ****     }
  55:Core/Src/water_pump.c **** 
  56:Core/Src/water_pump.c ****     for (size_t i = duty; i < 100; i++)
 100              		.loc 1 56 0 is_stmt 1
 101 0018 019B     		ldr	r3, [sp, #4]
 102              	.LVL7:
 103 001a 05E0     		b	.L9
 104              	.L10:
  57:Core/Src/water_pump.c ****     {
  58:Core/Src/water_pump.c ****         waterPWM[i] = (uint32_t)WP_Pin << 16U;
 105              		.loc 1 58 0 discriminator 3
 106 001c 4FF48001 		mov	r1, #4194304
 107 0020 034A     		ldr	r2, .L12
 108 0022 42F82310 		str	r1, [r2, r3, lsl #2]
  56:Core/Src/water_pump.c ****     {
 109              		.loc 1 56 0 discriminator 3
 110 0026 0133     		adds	r3, r3, #1
 111              	.LVL8:
ARM GAS  /tmp/cc1gS1jf.s 			page 4


 112              	.L9:
  56:Core/Src/water_pump.c ****     {
 113              		.loc 1 56 0 is_stmt 0 discriminator 1
 114 0028 632B     		cmp	r3, #99
 115 002a F7D9     		bls	.L10
 116              	.LBE4:
  59:Core/Src/water_pump.c ****     }
  60:Core/Src/water_pump.c **** }...
 117              		.loc 1 60 0 is_stmt 1
 118 002c 02B0     		add	sp, sp, #8
 119              	.LCFI1:
 120              		.cfi_def_cfa_offset 0
 121              		@ sp needed
 122 002e 7047     		bx	lr
 123              	.L13:
 124              		.align	2
 125              	.L12:
 126 0030 00000000 		.word	waterPWM
 127              		.cfi_endproc
 128              	.LFE68:
 130              		.section	.text.wpHandler,"ax",%progbits
 131              		.align	1
 132              		.global	wpHandler
 133              		.syntax unified
 134              		.thumb
 135              		.thumb_func
 136              		.fpu softvfp
 138              	wpHandler:
 139              	.LFB66:
   4:Core/Src/water_pump.c **** {
 140              		.loc 1 4 0
 141              		.cfi_startproc
 142              		@ args = 0, pretend = 0, frame = 0
 143              		@ frame_needed = 0, uses_anonymous_args = 0
 144 0000 08B5     		push	{r3, lr}
 145              	.LCFI2:
 146              		.cfi_def_cfa_offset 8
 147              		.cfi_offset 3, -8
 148              		.cfi_offset 14, -4
   5:Core/Src/water_pump.c ****     switch (vcu.state)
 149              		.loc 1 5 0
 150 0002 224B     		ldr	r3, .L24
 151 0004 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 152 0006 DBB2     		uxtb	r3, r3
 153 0008 052B     		cmp	r3, #5
 154 000a 3DD8     		bhi	.L14
 155 000c DFE803F0 		tbb	[pc, r3]
 156              	.L17:
 157 0010 39       		.byte	(.L16-.L17)/2
 158 0011 3C       		.byte	(.L14-.L17)/2
 159 0012 35       		.byte	(.L18-.L17)/2
 160 0013 35       		.byte	(.L18-.L17)/2
 161 0014 3C       		.byte	(.L14-.L17)/2
 162 0015 03       		.byte	(.L19-.L17)/2
 163              		.p2align 1
 164              	.L19:
   8:Core/Src/water_pump.c ****         if (ldu.dir == FWD || ldu.dir == REV)
ARM GAS  /tmp/cc1gS1jf.s 			page 5


 165              		.loc 1 8 0
 166 0016 1E4B     		ldr	r3, .L24+4
 167 0018 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 168 001a DBB2     		uxtb	r3, r3
 169 001c FF2B     		cmp	r3, #255
 170 001e 04D0     		beq	.L20
   8:Core/Src/water_pump.c ****         if (ldu.dir == FWD || ldu.dir == REV)
 171              		.loc 1 8 0 is_stmt 0 discriminator 1
 172 0020 1B4B     		ldr	r3, .L24+4
 173 0022 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 174 0024 DBB2     		uxtb	r3, r3
 175 0026 032B     		cmp	r3, #3
 176 0028 23D1     		bne	.L21
 177              	.L20:
 178              	.LBB5:
  10:Core/Src/water_pump.c ****             int throttleDuty = MAP(ldu.pot, 870, 4095, 50, 100);
 179              		.loc 1 10 0 is_stmt 1
 180 002a 1949     		ldr	r1, .L24+4
 181 002c CB89     		ldrh	r3, [r1, #14]
 182 002e 9BB2     		uxth	r3, r3
 183 0030 A3F26633 		subw	r3, r3, #870
 184 0034 3222     		movs	r2, #50
 185 0036 02FB03F3 		mul	r3, r2, r3
 186 003a 1648     		ldr	r0, .L24+8
 187 003c 80FB03E0 		smull	lr, r0, r0, r3
 188 0040 1844     		add	r0, r0, r3
 189 0042 DB17     		asrs	r3, r3, #31
 190 0044 C3EBE023 		rsb	r3, r3, r0, asr #11
 191 0048 1344     		add	r3, r3, r2
 192              	.LVL9:
  11:Core/Src/water_pump.c ****             int tempDuty = MAP(ldu.hsTemp, 0, 85, 50, 100);
 193              		.loc 1 11 0
 194 004a 8988     		ldrh	r1, [r1, #4]
 195 004c 89B2     		uxth	r1, r1
 196 004e 02FB01F2 		mul	r2, r2, r1
 197 0052 1149     		ldr	r1, .L24+12
 198 0054 81FB0201 		smull	r0, r1, r1, r2
 199 0058 D017     		asrs	r0, r2, #31
 200 005a C0EB6110 		rsb	r0, r0, r1, asr #5
 201 005e 3230     		adds	r0, r0, #50
 202              	.LVL10:
  13:Core/Src/water_pump.c ****             if (tempDuty > throttleDuty)
 203              		.loc 1 13 0
 204 0060 8342     		cmp	r3, r0
 205 0062 02DA     		bge	.L22
  15:Core/Src/water_pump.c ****                 wpDuty(tempDuty);
 206              		.loc 1 15 0
 207 0064 FFF7FEFF 		bl	wpDuty
 208              	.LVL11:
 209 0068 08BD     		pop	{r3, pc}
 210              	.LVL12:
 211              	.L22:
  19:Core/Src/water_pump.c ****                 wpDuty(throttleDuty);
 212              		.loc 1 19 0
 213 006a 1846     		mov	r0, r3
 214              	.LVL13:
 215 006c FFF7FEFF 		bl	wpDuty
ARM GAS  /tmp/cc1gS1jf.s 			page 6


 216              	.LVL14:
 217 0070 08BD     		pop	{r3, pc}
 218              	.L21:
 219              	.LBE5:
  24:Core/Src/water_pump.c ****             wpDuty(0);
 220              		.loc 1 24 0
 221 0072 0020     		movs	r0, #0
 222 0074 FFF7FEFF 		bl	wpDuty
 223              	.LVL15:
 224 0078 08BD     		pop	{r3, pc}
 225              	.L18:
  31:Core/Src/water_pump.c ****         wpDuty(50);
 226              		.loc 1 31 0
 227 007a 3220     		movs	r0, #50
 228 007c FFF7FEFF 		bl	wpDuty
 229              	.LVL16:
  32:Core/Src/water_pump.c ****         break;
 230              		.loc 1 32 0
 231 0080 08BD     		pop	{r3, pc}
 232              	.L16:
  35:Core/Src/water_pump.c ****         wpDuty(0);
 233              		.loc 1 35 0
 234 0082 0020     		movs	r0, #0
 235 0084 FFF7FEFF 		bl	wpDuty
 236              	.LVL17:
 237              	.L14:
 238 0088 08BD     		pop	{r3, pc}
 239              	.L25:
 240 008a 00BF     		.align	2
 241              	.L24:
 242 008c 00000000 		.word	vcu
 243 0090 00000000 		.word	ldu
 244 0094 71E691A2 		.word	-1567496591
 245 0098 61606060 		.word	1616928865
 246              		.cfi_endproc
 247              	.LFE66:
 249              		.comm	waterPWM,400,4
 250              		.comm	BMS,20,4
 251              		.comm	charger,2,4
 252              		.comm	vcu,7,4
 253              		.comm	iboost,2,4
 254              		.comm	ldu,18,4
 255              		.comm	tempdata,4,4
 256              		.comm	ADC_data,12,4
 257              		.comm	canDebug,4,4
 258              		.comm	txCycle2,4,4
 259              		.comm	txCycle,4,4
 260              		.comm	canTx2,8,4
 261              		.comm	canTx,8,4
 262              		.comm	canMailbox2,4,4
 263              		.comm	canMailbox,4,4
 264              		.comm	canRx2,8,4
 265              		.comm	canRx,8,4
 266              		.comm	txMsgExt2,24,4
 267              		.comm	txMsg2,24,4
 268              		.comm	rxMsg2,28,4
 269              		.comm	txMsgExt,24,4
ARM GAS  /tmp/cc1gS1jf.s 			page 7


 270              		.comm	txMsg,24,4
 271              		.comm	rxMsg,28,4
 272              		.comm	sf5,40,4
 273              		.comm	sf4,40,4
 274              		.comm	sf3,40,4
 275              		.comm	sf2,40,4
 276              		.comm	sf,40,4
 277              		.comm	hcan2,40,4
 278              		.comm	hcan1,40,4
 279              		.comm	tenderActive,1,1
 280              		.comm	time_now,4,4
 281              		.comm	period,4,4
 282              		.comm	DCDC,4,4
 283              		.comm	setPrevState,1,1
 284              		.comm	te,12,4
 285              		.text
 286              	.Letext0:
 287              		.file 2 "/usr/include/newlib/machine/_default_types.h"
 288              		.file 3 "/usr/include/newlib/sys/_stdint.h"
 289              		.file 4 "Drivers/CMSIS/Include/core_cm3.h"
 290              		.file 5 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/system_stm32f1xx.h"
 291              		.file 6 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f105xc.h"
 292              		.file 7 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f1xx.h"
 293              		.file 8 "/usr/lib/gcc/arm-none-eabi/6.3.1/include/stddef.h"
 294              		.file 9 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_can.h"
 295              		.file 10 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
 296              		.file 11 "/usr/include/newlib/sys/lock.h"
 297              		.file 12 "/usr/include/newlib/sys/_types.h"
 298              		.file 13 "/usr/include/newlib/sys/reent.h"
 299              		.file 14 "Core/Inc/encoder.h"
 300              		.file 15 "Core/Inc/dcdc.h"
 301              		.file 16 "Core/Inc/can_setup.h"
 302              		.file 17 "Core/Inc/vcu.h"
 303              		.file 18 "Core/Inc/water_pump.h"
ARM GAS  /tmp/cc1gS1jf.s 			page 8


DEFINED SYMBOLS
                            *ABS*:0000000000000000 water_pump.c
     /tmp/cc1gS1jf.s:16     .text.wpInit:0000000000000000 $t
     /tmp/cc1gS1jf.s:23     .text.wpInit:0000000000000000 wpInit
     /tmp/cc1gS1jf.s:55     .text.wpInit:0000000000000014 $d
                            *COM*:0000000000000190 waterPWM
     /tmp/cc1gS1jf.s:60     .text.wpDuty:0000000000000000 $t
     /tmp/cc1gS1jf.s:67     .text.wpDuty:0000000000000000 wpDuty
     /tmp/cc1gS1jf.s:126    .text.wpDuty:0000000000000030 $d
     /tmp/cc1gS1jf.s:131    .text.wpHandler:0000000000000000 $t
     /tmp/cc1gS1jf.s:138    .text.wpHandler:0000000000000000 wpHandler
     /tmp/cc1gS1jf.s:157    .text.wpHandler:0000000000000010 $d
     /tmp/cc1gS1jf.s:163    .text.wpHandler:0000000000000016 $t
     /tmp/cc1gS1jf.s:242    .text.wpHandler:000000000000008c $d
                            *COM*:0000000000000007 vcu
                            *COM*:0000000000000012 ldu
                            *COM*:0000000000000014 BMS
                            *COM*:0000000000000002 charger
                            *COM*:0000000000000002 iboost
                            *COM*:0000000000000004 tempdata
                            *COM*:000000000000000c ADC_data
                            *COM*:0000000000000004 canDebug
                            *COM*:0000000000000004 txCycle2
                            *COM*:0000000000000004 txCycle
                            *COM*:0000000000000008 canTx2
                            *COM*:0000000000000008 canTx
                            *COM*:0000000000000004 canMailbox2
                            *COM*:0000000000000004 canMailbox
                            *COM*:0000000000000008 canRx2
                            *COM*:0000000000000008 canRx
                            *COM*:0000000000000018 txMsgExt2
                            *COM*:0000000000000018 txMsg2
                            *COM*:000000000000001c rxMsg2
                            *COM*:0000000000000018 txMsgExt
                            *COM*:0000000000000018 txMsg
                            *COM*:000000000000001c rxMsg
                            *COM*:0000000000000028 sf5
                            *COM*:0000000000000028 sf4
                            *COM*:0000000000000028 sf3
                            *COM*:0000000000000028 sf2
                            *COM*:0000000000000028 sf
                            *COM*:0000000000000028 hcan2
                            *COM*:0000000000000028 hcan1
                            *COM*:0000000000000001 tenderActive
                            *COM*:0000000000000004 time_now
                            *COM*:0000000000000004 period
                            *COM*:0000000000000004 DCDC
                            *COM*:0000000000000001 setPrevState
                            *COM*:000000000000000c te
                     .debug_frame:0000000000000010 $d

NO UNDEFINED SYMBOLS
